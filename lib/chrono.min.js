(function(){var e,t,n,r=[].slice;e=function(){function e(){var e,n,i;n=arguments[0],i=2<=arguments.length?r.call(arguments,1):[],n==null&&(n={}),this.tickHandlers=i,e={precision:1e3,max:void 0,stopAtMax:!1},n.precision&&(n.precision=this.__toMilliseconds(n.precision)),n.max&&(n.max=this.__toMilliseconds(n.max)),this.settings=t(e,n),this.reset()}return e.prototype.start=function(){var e=this;return this.__handlers?this:(this.__callHandlers(),this.__handlers=setInterval(function(t){return e.__tick(t)},this.settings.precision),this.ticking=!0,this)},e.prototype.stop=function(){return this.__handlers&&clearInterval(this.__handlers),this.__handlers=null,this.ticking=!1,this},e.prototype.reset=function(e){return this.__ms=e!=null?e:0,this.__ms!==0&&(this.__ms=this.__toMilliseconds(this.__ms)),this.stop(),this},e.prototype.time=function(e){var t;return t=this.__newDate(this.__ms),e&&(t=this.__applyDateChanges(t,e),this.__ms=t.getTime()),this.__timeObject(t)},e.prototype.__tick=function(){return this.__ms+=this.settings.precision,this.settings.stopAtMax&&this.__ms>=this.settings.max&&this.stop(),this.__callHandlers(),this},e.prototype.__callHandlers=function(){var e,t,n,r;r=this.tickHandlers;for(t=0,n=r.length;t<n;t++)e=r[t],e(this.__ms,this,this.__ms>=this.settings.max);return this},e.prototype.__applyDateChanges=function(e,t){var n,r,i,s,o;i=/([+\-*\/]?)(\d+)(ms|[tsmh])\s?/g,r=[];while(n=i.exec(t))r.push(n);for(s=0,o=r.length;s<o;s++)n=r[s],e=this.__dateSingleChange(e,n);return e},e.prototype.__dateSingleChange=function(e,t){var n,r,i,s,o;s=t[0],r=t[1],o=t[2],i=t[3],o=parseInt(o),n=0;if(r!==void 0){switch(i){case"ms":n=e.getMilliseconds();break;case"s":n=e.getSeconds();break;case"m":n=e.getMinutes();break;case"h":n=e.getHours()}switch(r){case"+":n+=o;break;case"-":n-=o;break;case"*":n*=o;break;case"/":n/=o;break;case"":n=o}}switch(i){case"ms":e.setMilliseconds(n);break;case"s":e.setSeconds(n);break;case"m":e.setMinutes(n);break;case"h":e.setHours(n)}return e},e.prototype.__timeObject=function(e){var t;return t={ms:e.getMilliseconds(),s:e.getSeconds(),m:e.getMinutes(),h:e.getHours(),t:e.getTime()+36e5}},e.prototype.__newDate=function(e){return new Date(e-36e5)},e.prototype.__toMilliseconds=function(e){var t;t=0;switch(typeof e){case"number":t=e;break;case"string":t=this.__stringToMilliseconds(e);break;case"object":t=this.__objectToMilliseconds(e);break;default:throw new Error("unknow format : "+e)}return t},e.prototype.__objectToMilliseconds=function(e){var t;return t=0,typeof e.ms=="number"&&(t+=e.ms),typeof e.s=="number"&&(t+=e.s*1e3),typeof e.m=="number"&&(t+=e.m*6e4),typeof e.h=="number"&&(t+=e.h*36e5),t},e.prototype.__stringToMilliseconds=function(e){var t,n,r,i,s,o;n=/(\d+)(ms|[tsmh])\s?/g,t=0,i=[];while(r=n.exec(e))i.push(r);for(s=0,o=i.length;s<o;s++)r=i[s],t+=this.__subStringToMilliseconds(r);return t},e.prototype.__subStringToMilliseconds=function(e){var t,n,r,i;i=e[0],n=e[1],r=e[2],n=parseInt(n),t=0;switch(r){case"ms":t=n;break;case"s":t=n*1e3;break;case"m":t=n*6e4;break;case"h":t=n*36e5}return t},e}(),t=function(e,t){var n,r;for(n in t)r=t[n],e[n]=r;return e},n=typeof exports!="undefined"&&exports!==null?exports:this,n.Chrono=e}).call(this);